(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b8c8142"],{"0824":function(t,a,s){},"27da":function(t,a,s){"use strict";var e=s("6b93"),r=s.n(e);r.a},"38aa":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"container my-4"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md"},[s("span",{staticClass:"badge badge-pill step py-3",class:{"bg-yellow":t.total}},[t._v("1.填寫訂購資料")])]),s("div",{staticClass:"col-md"},[s("span",{staticClass:"badge badge-pill step py-3",class:{"bg-yellow":!1===t.paid}},[t._v("2.金流付款")])]),s("div",{staticClass:"col-md"},[s("span",{staticClass:"badge badge-pill step py-3",class:{"bg-yellow":!0===t.paid}},[t._v("3.完成！")])])])])])},r=[],i={props:["total","paid"]},n=i,o=(s("be37"),s("2877")),l=Object(o["a"])(n,e,r,!1,null,"4c5b5fa3",null);a["a"]=l.exports},4275:function(t,a,s){},"47ae":function(t,a,s){},"6b93":function(t,a,s){},8418:function(t,a,s){"use strict";var e=s("c04e"),r=s("9bf2"),i=s("5c6c");t.exports=function(t,a,s){var n=e(a);n in t?r.f(t,n,i(0,s)):t[n]=s}},8650:function(t,a,s){"use strict";var e=s("47ae"),r=s.n(e);r.a},"99af":function(t,a,s){"use strict";var e=s("23e7"),r=s("d039"),i=s("e8b5"),n=s("861d"),o=s("7b0b"),l=s("50c4"),c=s("8418"),d=s("65f0"),u=s("1dde"),v=s("b622"),m=s("2d00"),f=v("isConcatSpreadable"),p=9007199254740991,b="Maximum allowed index exceeded",h=m>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),g=u("concat"),C=function(t){if(!n(t))return!1;var a=t[f];return void 0!==a?!!a:i(t)},_=!h||!g;e({target:"Array",proto:!0,forced:_},{concat:function(t){var a,s,e,r,i,n=o(this),u=d(n,0),v=0;for(a=-1,e=arguments.length;a<e;a++)if(i=-1===a?n:arguments[a],C(i)){if(r=l(i.length),v+r>p)throw TypeError(b);for(s=0;s<r;s++,v++)s in i&&c(u,v,i[s])}else{if(v>=p)throw TypeError(b);c(u,v++,i)}return u.length=v,u}})},a434:function(t,a,s){"use strict";var e=s("23e7"),r=s("23cb"),i=s("a691"),n=s("50c4"),o=s("7b0b"),l=s("65f0"),c=s("8418"),d=s("1dde"),u=s("ae40"),v=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,p=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";e({target:"Array",proto:!0,forced:!v||!m},{splice:function(t,a){var s,e,d,u,v,m,g=o(this),C=n(g.length),_=r(t,C),x=arguments.length;if(0===x?s=e=0:1===x?(s=0,e=C-_):(s=x-2,e=p(f(i(a),0),C-_)),C+s-e>b)throw TypeError(h);for(d=l(g,e),u=0;u<e;u++)v=_+u,v in g&&c(d,u,g[v]);if(d.length=e,s<e){for(u=_;u<C-e;u++)v=u+e,m=u+s,v in g?g[m]=g[v]:delete g[m];for(u=C;u>C-e+s;u--)delete g[u-1]}else if(s>e)for(u=C-e;u>_;u--)v=u+e-1,m=u+s-1,v in g?g[m]=g[v]:delete g[m];for(u=0;u<s;u++)g[u+_]=arguments[u+2];return g.length=C-e+s,d}})},b7c8:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("Menu",{attrs:{numberCart:t.cartNumber}}),s("AlertMessage"),s("CheckoutStep",{attrs:{total:t.cart.total}}),s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"container"},[0!==t.cart.total?s("div",{staticClass:"my-4 row justify-content-center"},[s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"collapse show",attrs:{id:"cartInfo"}},[s("div",{staticClass:"card-body"},[s("table",{staticClass:"table table-hover"},[t._m(1),t._l(t.cart.carts,(function(a){return s("tbody",{key:a.id},[s("tr",[s("td",{staticClass:"align-middle"},[s("img",{attrs:{src:a.product.imageUrl,width:"60px",height:"60px",alt:"",srcset:""}})]),s("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" "),a.coupon?s("div",{staticClass:"text-success"},[t._v(" 已套用折扣碼 ")]):t._e()]),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"input-group mb-3"},[s("div",{staticClass:"input-group-prepend",attrs:{id:"button-addon3"}},[s("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.changeQty(a.id,a.product.id,a.qty,!1)}}},[t._v(" - ")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:a.qty,expression:"item.qty",modifiers:{number:!0}}],staticClass:"form-control qty-input text-center",attrs:{type:"text",placeholder:"","aria-label":"Example text with two button addons","aria-describedby":"button-addon3"},domProps:{value:a.qty},on:{input:function(s){s.target.composing||t.$set(a,"qty",t._n(s.target.value))},blur:function(a){return t.$forceUpdate()}}}),s("div",{staticClass:"input-group-append",attrs:{id:"button-addon4"}},[s("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.changeQty(a.id,a.product.id,a.qty,!0)}}},[t._v(" + ")])])])])]),s("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currencyFilter")(a.final_total))+" ")]),s("td",{staticClass:"align-middle text-right"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.deleteCartItem(a.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])])])])})),s("tfoot",{staticClass:"bg-light"},[s("tr",[s("td",{staticClass:"text-right border-top-0",attrs:{colspan:"4"}},[t._v("總計")]),s("td",{staticClass:"h5 text-danger border-top-0"},[t._v(" "+t._s(t.cart.final_total)+" ")])])])],2)])])]),s("h2",{staticClass:"text-center my-4 text-primary font-weight-bolder"},[t._v(" 訂單資訊 ")]),s("form",{on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"email",placeholder:"請輸入Email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t.errors.has("email")?s("span",{staticClass:"text-danger"},[t._v("請輸入Email")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"name",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"tel"}},[t._v("電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required|myPhone",expression:"'required|myPhone'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"text",name:"tel",id:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t.errors.has("tel")?s("span",{staticClass:"text-danger"},[t._v("請輸入電話")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[t._v("地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"address",id:"address",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("請輸入地址")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"comment"}},[t._v("備註")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"5",rows:"5"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),s("div",{staticClass:"d-flex justify-content-between mt-4"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.backtoCart}},[t._v(" 返回購物車 ")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.createOrder}},[t._v(" 送出訂單 ")])])])])]):s("div",{staticClass:"row justify-content-center my-5"},[s("div",{staticClass:"col-md-8 text-center"},[s("p",{staticClass:"text-success font-weight-bolder h6"},[t._v(" 您的購物車內還沒有任何商品！ "),s("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.toCustomerOrders}},[t._v(" 繼續逛逛 ")])])])])]),s("footer",[s("Footer")],1)],1)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"card-header"},[s("button",{staticClass:"btn btn-link text-info text-decoration-none",attrs:{type:"button","data-toggle":"collapse","data-target":"#cartInfo","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(" 購物車資訊 "),s("i",{staticClass:"fas fa-caret-down"})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th"),s("th",[t._v("商品名稱")]),s("th",[t._v("數量")]),s("th",{attrs:{width:"15%"}},[t._v("單價")]),s("th",[t._v("刪除")])])])}],i=(s("99af"),s("fb62")),n=s("38aa"),o=s("fd2d"),l={components:{Menu:i["a"],CheckoutStep:n["a"],Footer:o["a"]},data:function(){return{cart:{},isLoading:!1,num:6,coupon_code:"",cartNumber:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("starlightselect","/cart");t.isLoading=!0,t.axios.get(a).then((function(a){t.cart=a.data.data,t.num=a.data.data.qty,console.log(t.cart),t.cartNumber=a.data.data.carts.qty,t.isLoading=!1,t.$bus.$emit("cart",t.cartNumber)}))},backtoCart:function(){var t=this;t.$router.push("/cart")},createOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("starlightselect","/order");t.$validator.validate().then((function(s){s&&t.axios.post(a,{data:t.form}).then((function(a){a.data.success&&t.$router.push("/checkout/".concat(a.data.orderId))}))}))},deleteCartItem:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("starlightselect","/cart/").concat(t);a.axios.delete(s).then((function(){a.getCart()}))},toCustomerOrders:function(){var t=this;t.$router.push("/customer_orders")},changeQty:function(t,a,s,e){var r,i=this;i.isLoading=!0,r=!0===e?s+1:1===s?1:s-1;var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("starlightselect","/cart/").concat(t),o="".concat("https://vue-course-api.hexschool.io","/api/").concat("starlightselect","/cart"),l={product_id:a,qty:r};i.axios.all([i.axios.delete(n),i.axios.post(o,{data:l})]).then(i.axios.spread((function(){i.getCart(),i.isLoading=!1})))}},created:function(){var t=this;t.getCart()}},c=l,d=(s("27da"),s("2877")),u=Object(d["a"])(c,e,r,!1,null,"2d23633a",null);a["default"]=u.exports},be37:function(t,a,s){"use strict";var e=s("4275"),r=s.n(e);r.a},db6f:function(t,a,s){"use strict";var e=s("0824"),r=s.n(e);r.a},fb62:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"sticky-top"},[s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[s("div",{staticClass:"container"},[s("router-link",{staticClass:"navbar-brand box-shadow bg-transparent",attrs:{to:"/"}},[t._v("Starlight")]),t._m(0),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNavAltMarkup"}},[s("ul",{staticClass:"navbar-nav align-items-center w-100"},[s("li",{staticClass:"nav-item active"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[t._v(" 關於我們 "),s("span",{staticClass:"sr-only"},[t._v("(current)")])])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/news"}},[t._v("最新消息")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/customer_orders"}},[t._v("餐點介紹")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/customize"}},[t._v("訂製蛋糕")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/check_orders"}},[t._v("查看訂單")])],1),s("li",{staticClass:"nav-item ml-lg-auto"},[s("router-link",{staticClass:"nav-link text-secondary h5",attrs:{to:"/login"}},[s("i",{staticClass:"fas fa-cog"})])],1),s("li",{staticClass:"nav-item"},[s("div",{staticClass:"dropdown"},[s("a",{staticClass:"nav-link text-secondary h5",attrs:{href:"#",role:"button",id:"fav","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"fas fa-heart"}),t.favList?s("span",{staticClass:"badge badge-danger"},[t._v(t._s(t.favList.length))]):s("span",{staticClass:"badge badge-danger"},[t._v("0")])]),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"fav"}},[t.favList.length?s("div",{staticClass:"table-responsive p-3 font-size"},[s("h6",[t._v("收藏清單")]),s("table",{staticClass:"table table-hover width "},[s("tbody",t._l(t.favList,(function(a,e){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle",attrs:{width:"20%"}},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.deleteFavItem(a,e)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.title)+" ")]),s("td"),s("td",[s("a",{staticClass:"d-block",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.addFavtoCart(a.id,t.qty=1)}}},[s("i",{staticClass:"fas fa-shopping-cart fa-2x"})])])])})),0)])]):s("div",{staticClass:"width p-3"},[s("div",{staticClass:"text-center"},[s("h6",{staticClass:"text-primary"},[t._v("您的收藏清單目前是空的")]),s("router-link",{staticClass:"btn btn-heavy btn-sm",attrs:{to:"customer_orders"}},[t._v("繼續逛逛")])],1)])])])]),s("li",{staticClass:"nav-item"},[s("div",{staticClass:"dropdown"},[s("a",{staticClass:"nav-link text-secondary h5",attrs:{href:"#",role:"button",id:"cart","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"fas fa-shopping-cart"}),t.number?s("span",{staticClass:"badge badge-danger"},[t._v(t._s(t.number))]):s("span",{staticClass:"badge badge-danger"},[t._v("0")])]),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"cart"}},[0!==t.cart.total?s("div",{staticClass:"table-responsive p-3 font-size"},[s("h6",[t._v("選購商品")]),s("table",{staticClass:"table table-hover width "},[s("tbody",t._l(t.cart.carts,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" "),a.coupon?s("div",{staticClass:"text-success"},[t._v("已套用折扣碼")]):t._e()]),s("td",{staticClass:"align-middle",attrs:{width:"20%"}},[t._v(t._s(a.qty)+t._s(a.product.unit))]),s("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currencyFilter")(a.final_total)))]),s("td"),s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.deleteCartItem(a.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])])])})),0),0!==t.cart.total?s("tfoot",{staticClass:"bg-light"},[s("tr",[s("td",{staticClass:"text-right border-top-0",attrs:{colspan:"4"}},[t._v("總計")]),s("td",{staticClass:"h6 text-danger border-top-0"},[t._v(t._s(t._f("currencyFilter")(t.cart.final_total)))])])]):t._e()]),s("router-link",{staticClass:"btn btn-block btn-primary",attrs:{to:"checkout"}},[t._v("結帳去")])],1):s("div",{staticClass:"width p-3"},[s("div",{staticClass:"text-center"},[s("h6",{staticClass:"text-primary"},[t._v("您的購物車目前是空的")]),s("router-link",{staticClass:"btn btn-heavy btn-sm",attrs:{to:"customer_orders"}},[t._v("繼續逛逛")])],1)])])])])])])],1)])])},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])}],i=(s("99af"),s("a434"),{props:["data"],data:function(){return{number:"",cart:{},favnumber:"",favList:this.data}},methods:{updateCart:function(t){this.number=t},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("starlightselect","/cart");t.axios.get(a).then((function(a){t.cart=a.data.data,t.number=a.data.data.carts.length}))},deleteCartItem:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("starlightselect","/cart/").concat(t);a.axios.delete(s).then((function(t){a.getCart(),a.$bus.$emit("message:push",t.data.message,"warning")}))},deleteFavItem:function(t,a){var s=this;t.favItem=!1,s.favList.splice(a,1),console.log(this.favList.length),this.$emit("deleteFav",this.favList)},addFavtoCart:function(t,a){console.log(t,a),this.$emit("addFavtoCart",t,a)}},created:function(){var t=this;t.$bus.$on("cart",(function(a){t.updateCart(a),t.getCart()})),t.getCart()}}),n=i,o=(s("8650"),s("2877")),l=Object(o["a"])(n,e,r,!1,null,"17a401d4",null);a["a"]=l.exports},fd2d:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"bg-white mt-5 footer-height"},[e("div",{staticClass:"text-center text-secondary "},[e("img",{staticClass:"img-fluid",staticStyle:{width:"150px",height:"150px"},attrs:{src:s("fef8"),alt:"",srcset:""}}),e("p",[t._v("© 2020 Starlight* All Rights Reserved")]),e("div",[e("ul",{staticClass:"list-unstyled d-flex justify-content-center"},[e("li",{staticClass:"mr-2"},[e("a",{staticClass:"text-accent",attrs:{href:"# "}},[e("i",{staticClass:"fab fa-facebook-square fa-2x"})])]),e("li",{staticClass:"mr-2"},[e("a",{staticClass:"text-accent",attrs:{href:"#"}},[e("i",{staticClass:"fab fa-instagram instagram fa-2x"})])]),e("li",{staticClass:"mr-2"},[e("a",{staticClass:"text-success",attrs:{href:"#"}},[e("i",{staticClass:"fab fa-line fa-2x"})])])])])]),e("div",{staticClass:"bg-slight mt-3 py-4"},[e("div",{staticClass:"text-center"},[e("span",[t._v("資料、圖片來源皆來自網路，僅用來做為學習用途。")])])])])])}],i=(s("db6f"),s("2877")),n={},o=Object(i["a"])(n,e,r,!1,null,"3925e17b",null);a["a"]=o.exports},fef8:function(t,a,s){t.exports=s.p+"img/logo.f20dc4a5.svg"}}]);
//# sourceMappingURL=chunk-2b8c8142.21f714bc.js.map